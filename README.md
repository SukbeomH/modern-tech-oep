# ğŸŒ LLM ê¸°ë°˜ HTTP ë¯¸ë“¤ì›¨ì–´ ìë™í™” ì‹œìŠ¤í…œ

## 0. How to Run

1. `pip install anthropic dotenv streamlit`
2. `touch .env` << anthropic api key required
3. `streamlit run app.py`

## ğŸ“– 1. ì‹œìŠ¤í…œ ê°œìš”

## ğŸ› ï¸ 1.1 í”„ë¡œì íŠ¸ ë°°ê²½

ìµœê·¼ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ APIì˜ í™•ì‚°ìœ¼ë¡œ HTTP ìš”ì²­ ì²˜ë¦¬ì™€ ê´€ë ¨ëœ ìš”êµ¬ì‚¬í•­ì´ ì ì  ë³µì¡í•´ì§€ê³  ìˆìŠµë‹ˆë‹¤.  
**IP í•„í„°ë§, ìš”ì²­ ê²€ì¦, ë¡œê¹…, ì½˜í…ì¸  ë³€í™˜** ë“± HTTP ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ë¯¸ë“¤ì›¨ì–´ëŠ” ê°œë°œìê°€ ì§ì ‘ ì½”ë“œë¥¼ ì‘ì„±í•´ì•¼ í–ˆìœ¼ë‚˜, ì´ëŠ” ì‹œê°„ì´ ë§ì´ ì†Œìš”ë˜ê³  ì˜¤ë¥˜ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤.

ë³¸ í”„ë¡œì íŠ¸ëŠ” **AI ê¸°ë°˜ HTTP ë¯¸ë“¤ì›¨ì–´ ìë™í™” ì‹œìŠ¤í…œ**ìœ¼ë¡œ, ìì—°ì–´ ìš”ì²­ì„ ê¸°ë°˜ìœ¼ë¡œ ë¯¸ë“¤ì›¨ì–´ ì½”ë“œë¥¼ ìƒì„±í•˜ê³ , ì´ë¥¼ ê²€ì¦ ë° ê°œì„ í•˜ì—¬ **ê°œë°œ íš¨ìœ¨ì„±ê³¼ ì½”ë“œ í’ˆì§ˆ**ì„ ê·¹ëŒ€í™”í•©ë‹ˆë‹¤.

## ğŸ”‘ 2. í•µì‹¬ ì»´í¬ë„ŒíŠ¸

## ğŸ§  2.1 ìì—°ì–´ ì²˜ë¦¬ê¸° (ParsingAgent)

- **ê¸°ëŠ¥**: ì‚¬ìš©ìì˜ ìì—°ì–´ ì…ë ¥ì„ ë¶„ì„í•˜ì—¬ JSON í˜•ì‹ì˜ ìš”êµ¬ì‚¬í•­ì„ ìƒì„±.
    
- **ì˜ˆì‹œ ì…ë ¥**:  
    `"ëŸ¬ì‹œì•„ì—ì„œ ì˜¤ëŠ” ìš”ì²­ì„ ì°¨ë‹¨í•´ì¤˜"`
    
- **ì¶œë ¥ ì˜ˆì‹œ**:
```json
{   
	"intent": "block_request",  
	"entities": ["Russia"],  
	"requirements": ["Block requests from Russia"],  
	"constraints": [],  
	"parameters": {
		"country": "Russia"
	} 
}
```
    

## ğŸ” 2.2 HTTP ìš”ì²­ ë¶„ì„ê¸° (Request Analyzer)

- **ê¸°ëŠ¥**: ìƒ˜í”Œ HTTP ìš”ì²­ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ì—¬ ì£¼ìš” íŠ¹ì„±ì„ ì¶”ì¶œ.
    
- **ë¶„ì„ ëŒ€ìƒ**:
    
    - HTTP Method (GET, POST ë“±)
        
    - Headers (Content-Type, Authorization ë“±)
        
    - Body ë° Query Parameters
        
    - ìš”ì²­ì˜ Path ë° IP ì£¼ì†Œ
        
- **í™œìš© ì‚¬ë¡€**:
    
    - CORS ì •ì±… ê²€ì¦
        
    - JWT í† í° ìœ íš¨ì„± ê²€ì‚¬
        
    - URL íŒŒë¼ë¯¸í„° ì •ì œ
        

## ğŸ’» 2.3 í•¨ìˆ˜ ìƒì„±ê¸° (MiddlewareAgent)

- **ê¸°ëŠ¥**: JSON ìš”êµ¬ì‚¬í•­ì„ ê¸°ë°˜ìœ¼ë¡œ Python ì½”ë“œë¥¼ ìë™ ìƒì„±.
    
- **ì§€ì› ê¸°ëŠ¥**:
    
    - IP ê¸°ë°˜ í•„í„°ë§
        
    - ì½˜í…ì¸  í•„í„°ë§
        
    - ìš”ì²­ ë³€í™˜ ë° í—¤ë” ìˆ˜ì •
        
    - ë¡œê¹… ë° ìºì‹±
        
- **ì¶œë ¥ ì˜ˆì‹œ ì½”ë“œ**:
```python
def middleware(request):     
	if request.headers.get("X-Country") == "Russia":        
		return Response("Blocked", status=403)    
	return next(request)
```
    

## âœ… 2.4 í…ŒìŠ¤íŠ¸ ì—”ì§„ (ValidationAgent)

- **ê¸°ëŠ¥**: ìƒì„±ëœ ì½”ë“œê°€ ìš”êµ¬ì‚¬í•­ì„ ì¶©ì¡±í•˜ëŠ”ì§€ ê²€ì¦í•˜ê³  í”¼ë“œë°± ì œê³µ.
    
- **ê²€ì¦ í”„ë¡œì„¸ìŠ¤**:
    
    - êµ¬ì¡° ê²€ì¦: ë¬¸ë²• ì˜¤ë¥˜ í™•ì¸.
        
    - ê¸°ëŠ¥ ê²€ì¦: ìš”êµ¬ì‚¬í•­ ì¶©ì¡± ì—¬ë¶€ í™•ì¸.
        
    - ë³´ì•ˆ ê²€ì¦: OWASP Top 10 ê¸°ì¤€ìœ¼ë¡œ ë³´ì•ˆ ë¬¸ì œ ì‹ë³„.
        
- **ì¶œë ¥ ì˜ˆì‹œ**:
```text
ê²€ì¦ ê²°ê³¼: 
	- ë³´ì•ˆ ë¬¸ì œ: JWT í† í° ìœ íš¨ì„± ê²€ì‚¬ ëˆ„ë½ 
	- ì„±ëŠ¥ ë¬¸ì œ: ìºì‹± ë¡œì§ ì—†ìŒ ê°œì„  í•„ìš” ì‚¬í•­: 
	- í—¤ë” ê²€ì‚¬ ê°•í™”
```
    

## ğŸ“š 2.5 ë¬¸ì„œí™” ì—ì´ì „íŠ¸ (DocumentationAgent)

- **ê¸°ëŠ¥**: ìƒì„±ëœ ì½”ë“œì— ëŒ€í•œ ì£¼ì„ ë° API ë¬¸ì„œë¥¼ ìë™ ì‘ì„±.
    
- **ì¶œë ¥ ì˜ˆì‹œ**:
```text
# ì´ ë¯¸ë“¤ì›¨ì–´ëŠ” ëŸ¬ì‹œì•„ì—ì„œ ì˜¤ëŠ” ëª¨ë“  ìš”ì²­ì„ ì°¨ë‹¨í•©ë‹ˆë‹¤. 
# ì‚¬ìš© ì˜ˆì‹œ: 
# request.headers["X-Country"] = "Russia"
```

## ğŸ—‚ï¸ 2.6 ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬ (MiddlewareDatabase)

- SQLiteë¥¼ ì´ìš©í•´ ì‘ì—… íˆìŠ¤í† ë¦¬ë¥¼ ì €ì¥í•˜ê³  ê´€ë¦¬.
    
- **í…Œì´ë¸” ìŠ¤í‚¤ë§ˆ**:
```SQL
    CREATE TABLE middleware_history 
    (     
	    id INTEGER PRIMARY KEY AUTOINCREMENT, 
	    timestamp TEXT,    
	    input_text TEXT,    
	    requirements TEXT,    
	    initial_code TEXT,    
	    initial_documentation TEXT,    
	    validation TEXT,    
	    improved_code TEXT,    
	    improved_documentation TEXT 
	)
```
    

## ğŸ”„ 3. ì‘ë™ í”„ë¡œì„¸ìŠ¤

1. ì‚¬ìš©ìê°€ ìì—°ì–´ë¡œ ìš”ì²­ ì…ë ¥ (ì˜ˆ: `"ëŸ¬ì‹œì•„ì—ì„œ ì˜¤ëŠ” ìš”ì²­ì„ ì°¨ë‹¨í•´ì¤˜"`).
    
2. ParsingAgentê°€ ì…ë ¥ ë‚´ìš©ì„ ë¶„ì„í•˜ì—¬ JSON í˜•íƒœì˜ ìš”êµ¬ì‚¬í•­ ë„ì¶œ.
    
3. MiddlewareAgentê°€ ìš”êµ¬ì‚¬í•­ì— ë§ëŠ” Python ì½”ë“œë¥¼ ìë™ ìƒì„±.
    
4. SampleRequestAgentê°€ ìƒ˜í”Œ HTTP ìš”ì²­ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ìƒì„±.
    
5. ValidationAgentê°€ ìƒì„±ëœ ì½”ë“œë¥¼ ê²€ì¦í•˜ê³  í”¼ë“œë°± ì œê³µ.
    
6. DocumentationAgentê°€ ì½”ë“œì— ëŒ€í•œ ë¬¸ì„œë¥¼ ì‘ì„±.
    
7. í•„ìš” ì‹œ ê°œì„ ëœ ì½”ë“œì™€ ë¬¸ì„œë¥¼ ì¶”ê°€ì ìœ¼ë¡œ ìƒì„±.
    

## ğŸ“‹ 4. ì£¼ìš” ê¸°ëŠ¥ ìš”ì•½

| ê¸°ëŠ¥                | ì„¤ëª…                                                          |
| ------------------- | ------------------------------------------------------------- |
| ğŸ“‹ **ìš”êµ¬ì‚¬í•­ ë¶„ì„** | ì‚¬ìš©ìì˜ ìì—°ì–´ ì…ë ¥ì„ êµ¬ì¡°í™”ëœ JSON ê°ì²´ë¡œ ë³€í™˜.             |
| ğŸ’» **ì½”ë“œ ìƒì„±**     | Python ê¸°ë°˜ì˜ ë¯¸ë“¤ì›¨ì–´ í•¨ìˆ˜ ìë™ ìƒì„±.                        |
| âœ… **ì½”ë“œ ê²€ì¦**     | ValidationAgentë¥¼ í†µí•´ ë³´ì•ˆ, ì„±ëŠ¥, ìš”êµ¬ì‚¬í•­ ì¶©ì¡± ì—¬ë¶€ë¥¼ ê²€ì¦. |
| ğŸš€ **ê°œì„  í”„ë¡œì„¸ìŠ¤** | ê²€ì¦ í”¼ë“œë°±ì„ ë°”íƒ•ìœ¼ë¡œ ê°œì„ ëœ ì½”ë“œì™€ ë¬¸ì„œë¥¼ ìƒì„±.             |
| ğŸ“š **ë¬¸ì„œí™” ì§€ì›**   | DocumentationAgentë¥¼ í™œìš©í•œ ìë™í™”ëœ ì½”ë“œ ì£¼ì„ ë° ì„¤ëª… ì‘ì„±.  |

## ğŸ—„ï¸ 5. ë°ì´í„° ì €ì¥ ë° ê´€ë¦¬

## SQLite ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡° (`middleware_history`)

| Column Name              | Type    | Description                 |
| ------------------------ | ------- | --------------------------- |
| `id`                     | INTEGER | ê³ ìœ  ì‹ë³„ì                 |
| `timestamp`              | TEXT    | ì‘ì—… ì‹œê°„                   |
| `input_text`             | TEXT    | ì‚¬ìš©ìê°€ ì…ë ¥í•œ ìì—°ì–´ ìš”ì²­ |
| `requirements`           | TEXT    | ë¶„ì„ëœ ìš”êµ¬ì‚¬í•­(JSON)       |
| `initial_code`           | TEXT    | ìµœì´ˆë¡œ ìƒì„±ëœ ë¯¸ë“¤ì›¨ì–´ ì½”ë“œ |
| `initial_documentation`  | TEXT    | ìµœì´ˆë¡œ ì‘ì„±ëœ ë¬¸ì„œ          |
| `validation`             | TEXT    | ê²€ì¦ ê²°ê³¼                   |
| `improved_code`          | TEXT    | ê°œì„ ëœ ì½”ë“œ                 |
| `improved_documentation` | TEXT    | ê°œì„ ëœ ë¬¸ì„œ                 |

## ğŸŒŸ 6. ê¸°ëŒ€ íš¨ê³¼

| êµ¬ë¶„                 | ê¸°ì¡´ ë°©ì‹                  | AI ê¸°ë°˜ ì†”ë£¨ì…˜     |
| -------------------- | -------------------------- | ------------------ |
| â±ï¸ **ì½”ë“œ ì‘ì„± ì‹œê°„** | ìˆ˜ ì‹œê°„ ì†Œìš”               | ì‹¤ì‹œê°„ ìƒì„± ê°€ëŠ¥   |
| ğŸ¯ **ê²€ì¦ ì •í™•ë„**    | ì‚¬ëŒ ì˜ì¡´ (ì˜¤ë¥˜ ë°œìƒ ê°€ëŠ¥) | AIê°€ ì •í™•íˆ ê²€ì¦   |
| ğŸ“ **ë¬¸ì„œ ì‘ì„± ì‹œê°„** | ìˆ˜ë™ ì‘ì—… í•„ìš”             | ì‹¤ì‹œê°„ ë¬¸ì„œí™”      |
| ğŸ’° **ìœ ì§€ë³´ìˆ˜ ë¹„ìš©**  | ë†’ìŒ                       | ë‚®ìŒ (ìë™ ìµœì í™”) |

## ğŸš€ 7. ê²°ë¡  ë° ì°¨ë³„ì 

ë³¸ ì†”ë£¨ì…˜ì€ AI ê¸°ìˆ ì„ í™œìš©í•˜ì—¬ HTTP ë¯¸ë“¤ì›¨ì–´ ê°œë°œ ê³¼ì •ì„ ê°œì„ í•©ë‹ˆë‹¤.

âœ” ìì—°ì–´ ì…ë ¥ë§Œìœ¼ë¡œ ìš”êµ¬ì‚¬í•­ ë¶„ì„ë¶€í„° ì½”ë“œ ìƒì„±ê¹Œì§€ ìë™í™”  
âœ” ê²€ì¦ ë° í”¼ë“œë°± ê³¼ì •ì„ í†µí•´ ê³ í’ˆì§ˆ ì½”ë“œë¥¼ ë³´ì¥  
âœ” ì§€ì†ì ì¸ ë°ì´í„° í•™ìŠµìœ¼ë¡œ ì ì§„ì  ì„±ëŠ¥ í–¥ìƒ  